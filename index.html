<!DOCTYPE html>
<!DOCTYPE html>
<html lang="tr">
<head>
    <!-- Mevcut head iÃ§eriÄŸi... -->
</head>
<body>
    <!-- â¬‡ï¸ BU KISMI EKLEYIN â¬‡ï¸ -->
    <div id="password-screen" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
    ">
        <div style="
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            text-align: center;
            max-width: 400px;
            width: 90%;
        ">
            <h1 style="color: white; margin-bottom: 10px; font-size: 28px;">ğŸ¥ TR CanlÄ± Kameralar</h1>
            <p style="color: #888; margin-bottom: 30px;">Beta sÃ¼rÃ¼mÃ¼ne eriÅŸim iÃ§in ÅŸifre girin</p>
            
            <input 
                type="password" 
                id="password-input" 
                placeholder="Åifre girin..."
                style="
                    width: 100%;
                    padding: 15px;
                    border: 1px solid rgba(255,255,255,0.1);
                    background: rgba(255,255,255,0.05);
                    color: white;
                    border-radius: 10px;
                    font-size: 16px;
                    margin-bottom: 20px;
                    outline: none;
                "
            />
            
            <button 
                onclick="checkPassword()" 
                style="
                    width: 100%;
                    padding: 15px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    border: none;
                    border-radius: 10px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: transform 0.2s;
                "
                onmouseover="this.style.transform='scale(1.02)'"
                onmouseout="this.style.transform='scale(1)'"
            >
                GiriÅŸ Yap
            </button>
            
            <p id="error-msg" style="color: #ff6b6b; margin-top: 15px; display: none; font-size: 14px;">
                âŒ YanlÄ±ÅŸ ÅŸifre!
            </p>
        </div>
    </div>

    <script>
        const CORRECT_PASSWORD = "beta2025"; // Ä°stediÄŸiniz ÅŸifreyi buraya yazÄ±n

        function checkPassword() {
            const input = document.getElementById('password-input');
            const errorMsg = document.getElementById('error-msg');
            const passwordScreen = document.getElementById('password-screen');
            
            if (input.value === CORRECT_PASSWORD) {
                // Åifre doÄŸru - ekranÄ± kapat
                passwordScreen.style.display = 'none';
                sessionStorage.setItem('authenticated', 'true');
            } else {
                // Åifre yanlÄ±ÅŸ
                errorMsg.style.display = 'block';
                input.value = '';
                input.focus();
            }
        }

        // Enter tuÅŸu ile de giriÅŸ yapÄ±labilsin
        document.getElementById('password-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        // Sayfa yÃ¼klendiÄŸinde kontrol et
        window.addEventListener('load', function() {
            if (sessionStorage.getItem('authenticated') === 'true') {
                document.getElementById('password-screen').style.display = 'none';
            }
        });
    </script>
    <!-- â¬†ï¸ BU KISIM EKLE BÄ°TTÄ° â¬†ï¸ -->

    <!-- Mevcut harita ve iÃ§erik kodlarÄ± buradan devam ediyor... -->
    <div id="map"></div>
    ...
</body>
</html>
<script>
    // 1. BASÄ°T GÄ°RÄ°Å ÅÄ°FRESÄ°
    const sifre = "kamera2025"; // BurayÄ± kendi ÅŸifrenle deÄŸiÅŸtir
    let girilen = prompt("LÃ¼tfen giriÅŸ ÅŸifresini yazÄ±n:");

    if (girilen !== sifre) {
        alert("HatalÄ± ÅŸifre!");
        document.body.innerHTML = "<h1>EriÅŸim Reddedildi.</h1>";
        window.stop(); // SayfanÄ±n geri kalanÄ±nÄ± yÃ¼klemeyi durdurur
    }

    // ... Supabase baÄŸlantÄ± kodlarÄ±n burada kalacak ...

    // 2. LÄ°NK MASKELEME FONKSÄ°YONU
    // Bu fonksiyon, linkin Ã§alÄ±nmasÄ±nÄ± zorlaÅŸtÄ±rÄ±r.
    function yayiniAc(id) {
        // KullanÄ±cÄ± linki saÄŸ tÄ±klayÄ±p kopyalayamaz, Ã§Ã¼nkÃ¼ link DOM'da doÄŸrudan yok.
        // Veriyi o an Supabase'den veya hafÄ±zadaki listeden bulup aÃ§arÄ±z.
        const kamera = kameralarListesi.find(k => k.id === id);
        if (kamera && kamera.stream_url) {
            window.open(kamera.stream_url, '_blank');
        }
    }
</script>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TR CanlÄ± Kameralar - Koyu Harita</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { font-family: sans-serif; margin: 0; background: #121212; color: white; }
        #map { height: 100vh; width: 100%; } /* Tam ekran koyu harita */
        .leaflet-popup-content { color: #000; }
    </style>
</head>
<body>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // BURAYI SUPABASE'DEN ALDIÄIN BÄ°LGÄ°LERLE DOLDUR
        const SUPABASE_URL = 'https://egrvojzmrykairbglqjq.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVncnZvanptcnlrYWlyYmdscWpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3MDgyNDcsImV4cCI6MjA4NDI4NDI0N30.sbIKNJcVlEGlVOgb_gBagP-Nn1NtBMKOlRzJmhH5TSM';

        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);

        // KOYU TEMA HARÄ°TA BAÅLATMA
        var map = L.map('map').setView([39.0, 35.0], 6);

        // CartoDB Dark Matter (Koyu Tema)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap &copy; CARTO'
        }).addTo(map);

        async function verileriYukle() {
            try {
                // Tablo isminiz 'Kameralar' (K harfi bÃ¼yÃ¼k) ise tam bÃ¶yle yazÄ±n
                const { data, error } = await supabaseClient.from('Kameralar').select('*');
                
                if (error) {
                    console.error("Supabase HatasÄ±:", error.message);
                    return;
                }

                if (data && data.length > 0) {
                    data.forEach(kamera => {
                        // SÃ¼tun isimlerini tablodaki gibi tam eÅŸleÅŸecek ÅŸekilde gÃ¼ncelledik
                        const ad = kamera['kamera adÄ±'];
                        const lat = kamera['Enlem - koordinat iÃ§in'];
                        const lng = kamera['Boylam - koordinat iÃ§in'];
                        const img = kamera['snapshot_url'];
                        const stream = kamera['stream_url'];

                        if (lat && lng) {
                            L.marker([lat, lng]).addTo(map)
                                .bindPopup(`
                                    <div style="text-align:center">
                                        <b>${ad || 'Kamera'}</b><br>
                                        <img src="${img || 'https://via.placeholder.com/150'}" width="150" style="margin:5px 0"><br>
                                        <a href="${stream}" target="_blank">CanlÄ± Ä°zle</a>
                                    </div>
                                `);
                        }
                    });
                }
            } catch (err) {
                console.error("Hata:", err);
            }
        }

        verileriYukle();
    </script>
</body>
</html>
